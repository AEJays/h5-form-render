{"remainingRequest":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\babel-loader\\lib\\index.js!D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\workspace2015\\sport\\wc-project\\h5-form-render\\src\\views\\parser\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\src\\views\\parser\\index.vue","mtime":1623743340123},{"path":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\workspace2015\\sport\\wc-project\\h5-form-render\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBQYXJzZXIgZnJvbSAnLi4vLi4vY29tcG9uZW50cy9QYXJzZXInOwppbXBvcnQgUHJldmlldyBmcm9tICcuLi8uLi9jb21wb25lbnRzL1ByZXZpZXcnOwppbXBvcnQgeyB1cmxQYXJhbSwgQmFzZTY0IH0gZnJvbSAnQC91dGlscyc7IC8vIGltcG9ydCB7IGNvbmZpZyB9IGZyb20gJ0AvY29uZmlnJwoKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IGNsb25lRGVlcCBmcm9tICdsb2Rhc2guY2xvbmVkZWVwJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdINUZvcm1SZW5kZXInLAogIHByb3BzOiB7CiAgICAvLyDooajljZVpZAogICAgYXJnRm9ybUlkOiBTdHJpbmcsCiAgICAvLyDooajljZXmlbDmja5pZAogICAgYXJnRGF0YUlkOiBTdHJpbmcsCiAgICAvLyDooajljZXmlbDmja4KICAgIGFyZ0Zvcm1EYXRhOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0sCiAgICAvLyDmmK/lkKbmiYvliqjmj5DkuqQKICAgIGlmTWFudWFsU3VibWl0OiBCb29sZWFuLAogICAgYXJnTW9kOiBTdHJpbmcgLy8g6buY6K6k57yW6L6RIGVkaXQ6IOe8lui+kSAgcHJldmlldzog6aKE6KeICgogIH0sCiAgY29tcG9uZW50czogewogICAgUGFyc2VyOiBQYXJzZXIsCiAgICBQcmV2aWV3OiBQcmV2aWV3CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY29uZmlnOiB7fSwKICAgICAgZm9ybUluZm86IHt9LAogICAgICBmb3JtRGF0YToge30sCiAgICAgIG1vZDogJ2VkaXQnCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuaW5pdERhdGEoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGluaXREYXRhOiBmdW5jdGlvbiBpbml0RGF0YSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtSWQgPSB0aGlzLmFyZ0Zvcm1JZCB8fCB1cmxQYXJhbSgnaWQnKTsKICAgICAgdmFyIGRhdGFJZCA9IHRoaXMuYXJnRGF0YUlkIHx8IHVybFBhcmFtKCdkYXRhSWQnKTsKICAgICAgdGhpcy5tb2QgPSB0aGlzLmFyZ01vZCB8fCB1cmxQYXJhbSgnbW9kJyk7CgogICAgICBpZiAoIWZvcm1JZCkgewogICAgICAgIHRoaXMuZ2V0RGVidWdEYXRhKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB2YXIgdXJsID0gJy9hcGkucGFnZS5kZXNpZ24uZm9ybS9sb2FkRm9ybUluZm8nOwogICAgICBheGlvcy5wb3N0KHVybCwgewogICAgICAgIGZvcm1JZDogZm9ybUlkLAogICAgICAgIGRhdGFJZDogZGF0YUlkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocmVzLmRhdGEpID09PSAnW29iamVjdCBPYmplY3RdJyAmJiByZXMuZGF0YS5jb2RlLmluZGV4T2YoJzAwMDAwJykgPj0gMCkgewogICAgICAgICAgdmFyIGRhdGEgPSByZXMuZGF0YS5kYXRhIHx8IHt9OwogICAgICAgICAgX3RoaXMuZm9ybUluZm8gPSBkYXRhLmZvcm0gfHwge307CiAgICAgICAgICB2YXIganNvbkRlZmluZSA9IF90aGlzLmZvcm1JbmZvLmpzb25EZWZpbmU7CiAgICAgICAgICB2YXIgY29uZmlnID0gSlNPTi5wYXJzZShCYXNlNjQuZGVjb2RlKGpzb25EZWZpbmUpKTsKICAgICAgICAgIF90aGlzLmNvbmZpZyA9IGNvbmZpZzsgLy8g5oyH5a6a6KGo5Y2V5pWw5o2uCgogICAgICAgICAgaWYgKF90aGlzLmFyZ0Zvcm1EYXRhICYmIEpTT04uc3RyaW5naWZ5KF90aGlzLmFyZ0Zvcm1EYXRhKSAhPT0gJ3t9JykgewogICAgICAgICAgICBfdGhpcy5mb3JtRGF0YSA9IGNsb25lRGVlcChfdGhpcy5hcmdGb3JtRGF0YSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoIWNvbmZpZy5sb2FkQXBpKSB7CiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRBcGlIYW5kbGVyKGRhdGEpOwoKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQoKICAgICAgICAgIF90aGlzLmN1c3RvbUFwaUhhbmRsZXIoY29uZmlnKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXREZWJ1Z0RhdGE6IGZ1bmN0aW9uIGdldERlYnVnRGF0YSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoJ2h0dHBzOi8vYXBpLm1vY2suc21hbGxzYWFzLmNuL2Zvcm0nKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBfdGhpczIuY29uZmlnID0gcmVzLmRhdGE7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVmYXVsdEFwaUhhbmRsZXI6IGZ1bmN0aW9uIGRlZmF1bHRBcGlIYW5kbGVyKGRhdGEpIHsKICAgICAgdmFyIGZvcm1EYXRhID0ge307CiAgICAgIE9iamVjdC5rZXlzKGRhdGEuZm9ybURhdGEgfHwge30pLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgIHZhciBfa2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7CgogICAgICAgIGZvcm1EYXRhW19rZXldID0gZGF0YS5mb3JtRGF0YVtrZXldOwogICAgICB9KTsKICAgICAgdGhpcy5mb3JtRGF0YSA9IGZvcm1EYXRhOwogICAgfSwKICAgIGN1c3RvbUFwaUhhbmRsZXI6IGZ1bmN0aW9uIGN1c3RvbUFwaUhhbmRsZXIoY29uZmlnKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgYXhpb3MuZ2V0KGNvbmZpZy5sb2FkQXBpKS50aGVuKGZ1bmN0aW9uIChycykgewogICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocnMuZGF0YSkgPT09ICdbb2JqZWN0IE9iamVjdF0nICYmIHJzLmRhdGEuY29kZSA9PT0gJzAwMDAwMCcpIHsKICAgICAgICAgIF90aGlzMy5mb3JtRGF0YSA9IHJzLmRhdGEuZGF0YSB8fCB7fTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRGb3JtRGF0YTogZnVuY3Rpb24gZ2V0Rm9ybURhdGEoKSB7CiAgICAgIHJldHVybiB0aGlzLiRyZWZzLmg1Rm9ybVBhcnNlckNvbXBSZWYuZ2V0U3VibWl0RGF0YSgpOwogICAgfSwKICAgIHN1Ym1pdDogZnVuY3Rpb24gc3VibWl0KGZvcm0sIGNiKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3N1Ym1pdCcsIGZvcm0sIGNiKTsKICAgIH0sCiAgICBPblN1Ym1pdEZvcm1TdWM6IGZ1bmN0aW9uIE9uU3VibWl0Rm9ybVN1YygpIHsKICAgICAgdGhpcy4kZW1pdCgnT25TdWJtaXRGb3JtU3VjJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"form-container\">\r\n    <Parser\r\n      :config=\"config\"\r\n      :form-info=\"formInfo\"\r\n      :srv-form-data=\"formData\"\r\n      :if-manual-submit=\"ifManualSubmit\"\r\n      @submit=\"submit\"\r\n      @OnSubmitFormSuc=\"OnSubmitFormSuc\"\r\n      ref=\"h5FormParserCompRef\"\r\n      v-if=\"mod !== 'preview'\"\r\n    />\r\n    <Preview\r\n      v-if=\"mod === 'preview'\"\r\n      :config=\"config\"\r\n      :srv-form-data=\"formData\"\r\n    />\r\n  </div>\r\n</template>\r\n<script>\r\nimport Parser from '../../components/Parser'\r\nimport Preview from '../../components/Preview'\r\nimport { urlParam, Base64 } from '@/utils'\r\n// import { config } from '@/config'\r\nimport axios from 'axios'\r\nimport cloneDeep from 'lodash.clonedeep'\r\nexport default {\r\n  name: 'H5FormRender',\r\n  props: {\r\n    // 表单id\r\n    argFormId: String,\r\n    // 表单数据id\r\n    argDataId: String,\r\n    // 表单数据\r\n    argFormData: {\r\n      type: Object,\r\n      default () {\r\n        return null\r\n      }\r\n    },\r\n    // 是否手动提交\r\n    ifManualSubmit: Boolean,\r\n    argMod: String, // 默认编辑 edit: 编辑  preview: 预览\r\n  },\r\n  components: {\r\n    Parser,\r\n    Preview\r\n  },\r\n  data () {\r\n    return {\r\n      config: {},\r\n      formInfo: {},\r\n      formData: {},\r\n      mod: 'edit'\r\n    }\r\n  },\r\n  created () {\r\n    this.initData()\r\n  },\r\n  methods: {\r\n    initData () {\r\n      const formId = this.argFormId || urlParam('id')\r\n      const dataId = this.argDataId || urlParam('dataId')\r\n      this.mod = this.argMod || urlParam('mod')\r\n      if (!formId) {\r\n        this.getDebugData()\r\n        return\r\n      }\r\n      const url = '/api.page.design.form/loadFormInfo'\r\n      axios.post(url, { formId, dataId })\r\n        .then((res) => {\r\n          if (Object.prototype.toString.call(res.data) === '[object Object]' && res.data.code.indexOf('00000') >= 0) {\r\n            const data = res.data.data || {}\r\n            this.formInfo = data.form || {}\r\n            const jsonDefine = this.formInfo.jsonDefine\r\n            const config = JSON.parse(Base64.decode(jsonDefine))\r\n            this.config = config\r\n\r\n            // 指定表单数据\r\n            if (this.argFormData && JSON.stringify(this.argFormData) !== '{}') {\r\n              this.formData = cloneDeep(this.argFormData)\r\n              return\r\n            }\r\n\r\n            if (!config.loadApi) {\r\n              this.defaultApiHandler(data)\r\n              return\r\n            }\r\n            this.customApiHandler(config)\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(err)\r\n        })\r\n    },\r\n    getDebugData () {\r\n      axios.get('https://api.mock.smallsaas.cn/form')\r\n        .then((res) => {\r\n          this.config = res.data\r\n        })\r\n        .catch((error) => {\r\n          console.log(error)\r\n        })\r\n    },\r\n    defaultApiHandler (data) {\r\n      const formData = {}\r\n      Object.keys((data.formData || {})).forEach(key => {\r\n        const _key = key.toLowerCase()\r\n        formData[_key] = data.formData[key]\r\n      })\r\n      this.formData = formData\r\n    },\r\n    customApiHandler (config) {\r\n      axios.get(config.loadApi).then(rs => {\r\n        if (Object.prototype.toString.call(rs.data) === '[object Object]' && rs.data.code === '000000') {\r\n          this.formData = rs.data.data || {}\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      })\r\n    },\r\n    getFormData () {\r\n      return this.$refs.h5FormParserCompRef.getSubmitData()\r\n    },\r\n    submit (form, cb) {\r\n      this.$emit('submit', form, cb)\r\n    },\r\n    OnSubmitFormSuc () {\r\n      this.$emit('OnSubmitFormSuc')\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n</style>\r\n"],"sourceRoot":"src/views/parser"}]}